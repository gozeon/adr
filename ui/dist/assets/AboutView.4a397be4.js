import{d as O,u as T,c as f,a as F,r as q,b as u,e,t as m,f as o,F as y,g as D,h as j,w as C,_ as S,i as R,j as z,o as c,k as g,n as I,l as h,v as b,m as E,p as Q}from"./index.a25144f8.js";import{u as A,Q as L}from"./record.7eeddca4.js";const G={class:"list-decimal mt-12 px-20"},H={class:"mb-3 hover:bg-stone-100 pl-4 cursor-pointer"},J=["onClick"],K=["onClick"],W=["value","onChange"],X=["value"],Y=e("div",{class:"py-20"},null,-1),Z=["onSubmit"],tt={class:"grid grid-cols-4 <sm:grid-cols-1 col-span-2 mb-5"},et=e("label",{class:"col-span-1 self-center md:justify-self-center"},"Title",-1),st={class:"grid grid-cols-4 <sm:grid-cols-1 col-span-2 mb-5"},ot=e("label",{class:"col-span-1 self-start md:justify-self-center"},"Description",-1),at={class:"col-span-3 h-[50vh]"},lt=e("div",{class:"grid grid-cols-4 col-span-2 mt-20 <sm:mt-30"},[e("button",{type:"submit",class:"col-start-2 <sm:col-start-1 py-2 bg-light-100 rounded-sm border-1 border-dark-300 hover:bg-dark-400 hover:text-white focus:ring-2 focus:ring-gray-300"},"Save")],-1),nt=["onSubmit"],rt={class:"grid grid-cols-4 <sm:grid-cols-1 col-span-2 mb-5"},it=e("label",{class:"col-span-1 self-center"},"ID",-1),ct={class:"grid grid-cols-4 <sm:grid-cols-1 col-span-2 mb-5"},dt=e("label",{class:"col-span-1 self-center"},"Name",-1),ut={class:"grid grid-cols-4 <sm:grid-cols-1 col-span-2 mb-5"},pt=e("label",{class:"col-span-1 self-center"},"Description",-1),mt=e("div",{class:"grid grid-cols-4 col-span-2"},[e("button",{type:"submit",class:"col-start-2 <sm:col-start-1 py-2 bg-light-100 rounded-sm border-1 border-dark-300 hover:bg-dark-400 hover:text-white focus:ring-2 focus:ring-gray-300"},"Save")],-1),_t=O({__name:"AboutView",setup(gt){const M=z(),U=Q(),p=T(),r=A(),l=f(()=>p.activeProject),N=f(()=>r.activeRecords),V=f(()=>r.statusMap),i=M.params.id,{openModal:_,hasRole:v,closeModal:x}=F();p.loadDetail(i),r.loadRecordByID(i);const B=async(a,s)=>{await r.updateStatus(s,+a.target.value),r.loadRecordByID(i)},k={title:"",description:"",status:1},n=q({...k}),P=async()=>{console.log(n);const{data:a}=await r.createOrUpdateRecord({...n,project_id:+i});(a==null?void 0:a.errNo)==0?(Object.assign(n,{...k}),r.loadRecordByID(i),x("create")):alert(a.errMsg)},w=async a=>{U.push({name:"record",params:{id:a,pid:i}})},$=async()=>{var s,t;const a=await p.createOrUpdateProject({...l.value});((s=a.data)==null?void 0:s.errNo)===0?(p.loadDetail(i),x("update"),Object.assign(n,{})):alert((t=a.data)==null?void 0:t.errMsg)};return(a,s)=>(c(),u(y,null,[e("h3",{class:"mt-10 text-3xl cursor-pointer divide-light-600 px-3 md:px-4",onClick:s[0]||(s[0]=t=>o(_)("update"))},m(o(l).title),1),e("p",{class:"mt-4 px-3 md:px-4 cursor-pointer",onClick:s[1]||(s[1]=t=>o(_)("update"))},m(o(l).description),1),e("ul",G,[(c(!0),u(y,null,D(o(N),t=>(c(),u("li",H,[e("div",{class:"flex justify-between <sm:flex-col <sm:gap-2",onClick:g(d=>w(t.ID),["self"])},[e("div",{class:I(["underline",{"text-notion-yellow":t.status==1,"text-notion-teal":t.status==2,"":t.status==3,"text-notion-red line-through":t.status==4,"text-notion-gray line-through":t.status==5}]),onClick:g(d=>w(t.ID),["self"])},m(t.title),11,K),e("select",{class:I(["px-10",{"bg-notion-yellow_background":t.status==1,"bg-notion-teal_background":t.status==2,"":t.status==3,"bg-notion-red_background":t.status==4,"bg-notion-gray_background":t.status==5}]),value:t.status,onChange:d=>B(d,t.ID)},[(c(!0),u(y,null,D(o(V),d=>(c(),u("option",{value:d.val},m(d.label),9,X))),256))],42,W)],8,J)]))),256))]),e("div",{class:"decoration-gray-400 px-4 text-center border-1 border-dark-500 border-dashed cursor-pointer hover:bg-stone-100 mx-20 mt-5 text-center w-2/4 xl:w-1/3 <sm:w-9/12 <sm:mt-10 <sm:mx-auto",onClick:s[2]||(s[2]=t=>o(_)("create"))}," + "),Y,o(v)("create")?(c(),j(S,{key:0,type:"create"},{default:C(()=>[e("form",{onSubmit:g(P,["prevent"]),class:"bg-white w-3/4 xl:w-2/3 <sm:w-11/12 m-auto px-8 py-5 mt-3 opacity-100 break-all"},[e("div",tt,[et,h(e("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=t=>n.title=t),required:"",minlength:"3",maxlength:"50",class:"col-span-3 p-3 focus:border-dark-500 focus:ring-gray-500 placeholder-gray-500",placeholder:"Record Title"},null,512),[[b,n.title]])]),e("div",st,[ot,e("div",at,[E(o(L),{placeholder:"Record Description","content-type":"html",content:n.description,"onUpdate:content":s[4]||(s[4]=t=>n.description=t)},null,8,["content"])])]),lt],40,Z)]),_:1})):R("",!0),o(v)("update")?(c(),j(S,{key:1,type:"update"},{default:C(()=>[e("form",{onSubmit:g($,["prevent"]),class:"bg-white w-3/4 xl:w-1/3 <sm:w-11/12 m-auto px-8 py-5 mt-3 opacity-100"},[e("div",rt,[it,h(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o(l).ID=t),type:"text",readonly:"",class:"col-span-3 p-3 focus:border-dark-500 focus:ring-gray-500",placeholder:"Project Name"},null,512),[[b,o(l).ID]])]),e("div",ct,[dt,h(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>o(l).title=t),type:"text",required:"",minlength:"3",maxlength:"50",class:"col-span-3 p-3 focus:border-dark-500 focus:ring-gray-500 placeholder-gray-500",placeholder:"Project Name"},null,512),[[b,o(l).title]])]),e("div",ut,[pt,h(e("textarea",{"onUpdate:modelValue":s[7]||(s[7]=t=>o(l).description=t),maxlength:"120",class:"col-span-3 resize-none p-3 focus:border-dark-500 focus:ring-gray-500 placeholder-gray-500",placeholder:"Project Description"},null,512),[[b,o(l).description]])]),mt],40,nt)]),_:1})):R("",!0)],64))}});export{_t as default};
