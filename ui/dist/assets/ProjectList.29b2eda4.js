import{d as w,u as j,i as P,E as C,f as M,j as N,y as l,k as n,F as g,q as S,z as c,t as B,m,s as I,v as V,l as s,B as i,C as d,_ as U,p as L,G as O}from"./index.55b364d5.js";const R=["onClick","onDblclick"],$=["onSubmit"],q={class:"grid grid-cols-4 col-span-2 mb-5"},z=s("label",{class:"col-span-1 self-center"},"ID",-1),E={class:"grid grid-cols-4 col-span-2 mb-5"},F=s("label",{class:"col-span-1 self-center"},"Name",-1),G={class:"grid grid-cols-4 col-span-2 mb-5"},T=s("label",{class:"col-span-1 self-center"},"Description",-1),A=s("div",{class:"grid grid-cols-4 col-span-2"},[s("button",{type:"submit",class:"col-start-2 py-2 bg-light-100 rounded-sm border-1 border-dark-300 hover:bg-dark-400 hover:text-white focus:ring-2 focus:ring-gray-300"},"Save")],-1),K=w({__name:"ProjectList",async setup(H){let p,u;const _=O(),r=j(),{openModal:h,hasRole:b,closeModal:f}=P();[p,u]=C(()=>r.loadProject()),await p,u();const y=M(()=>r.projects),o=N({}),v=async()=>{var e,t;const a=await r.createOrUpdateProject({...o});((e=a.data)==null?void 0:e.errNo)===0?(r.loadProject(),f("update"),Object.assign(o,{})):alert((t=a.data)==null?void 0:t.errMsg)},k=async a=>{const{data:e}=await r.loadDetail(a);(e==null?void 0:e.errNo)===0?(Object.assign(o,e.data),h("update")):alert(e==null?void 0:e.errMsg)},x=async a=>{_.push({name:"about",params:{id:a}})};return(a,e)=>(l(),n(g,null,[(l(!0),n(g,null,S(m(y),t=>(l(),n("div",{class:"underline decoration-gray-400 hover:bg-stone-100 px-4",key:t.id,onClick:c(D=>x(t.ID),["stop"]),onDblclick:c(D=>k(t.ID),["stop"])},B(t.title),41,R))),128)),m(b)("update")?(l(),I(U,{key:0,type:"update"},{default:V(()=>[s("form",{onSubmit:c(v,["prevent"]),class:"bg-white w-3/4 xl:w-1/3 m-auto px-8 py-5 mt-3 opacity-100"},[s("div",q,[z,i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.ID=t),type:"text",readonly:"",class:"col-span-3 p-3 focus:border-dark-500 focus:ring-gray-500",placeholder:"Project Name"},null,512),[[d,o.ID]])]),s("div",E,[F,i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.title=t),type:"text",required:"",minlength:"3",maxlength:"50",class:"col-span-3 p-3 focus:border-dark-500 focus:ring-gray-500 placeholder-gray-500",placeholder:"Project Name"},null,512),[[d,o.title]])]),s("div",G,[T,i(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.description=t),maxlength:"120",class:"col-span-3 resize-none p-3 focus:border-dark-500 focus:ring-gray-500 placeholder-gray-500",placeholder:"Project Description"},null,512),[[d,o.description]])]),A],40,$)]),_:1})):L("",!0)],64))}});export{K as default};
